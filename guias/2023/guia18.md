---
theme: jekyll-theme-leap-day
---

## Guía 17

[DAWM](/DAWM/) / [Proyecto06](/DAWM/proyectos/2023/proyecto06)

### Actividades previas

### Actividades

#### Dependencias Locales

* Instale los módulos **swagger-autogen** y **swagger-ui-express**

  ```
  npm install swagger-autogen swagger-ui-express
  ```

#### Swagger-config

* En la raíz del proyecto, cree el archivo **swagger.js**. En la variable **endpointsFiles** coloque las rutas a los controladores de los modelos.

  ```text
  const swaggerAutogen = require('swagger-autogen')()

  const outputFile = './swagger_output.json'
  const endpointsFiles = ['./routes/rest_<MODELO>.js']

  swaggerAutogen(outputFile, endpointsFiles)
  ```

#### Package.json - Script

* Modifique el archivo **package.json** y agregue la entrada _swagger-autogen_.

  ```text
  ...
  "scripts": {
    ...
    "swagger-autogen": "node swagger.js"
    ...
  },
  ...
  ```

#### Esquema de salida: swagger_ouput

* Desde la línea de comandos, ejecute el comando:

  ```
  npm run swagger-autogen
  ```

* Modifique el archivo **swagger_ouput.json** con la ruta URL base (clave _basepath_), con:

  ```text
  ...
  "basePath": "/rest",
  ...
  ```

* Modifique el archivo **swagger_ouput.json** con la ruta URL de cada endpoint (clave _path_):

  ```text
    ...
    "paths": {
      "/<MODELO>/findAll": {
        ...
      },
      "/<MODELO>/findById/{id}": {
        ...
      }
      ...
      "/<MODELO>/delete/{id}": {
      }
    }
    ...
  ```

#### Registro del manejador de rutas

* Modifique el archivo generado **app.js** con la referencia al módulo _swagger-ui-express_ y al archivo generado _swagger_output.json_. Además, agregue la ruta a la documentación.


  ```text
  ...
  /* REFERENCIA AL MÓDULO */
  const swaggerUi = require('swagger-ui-express')

  /* REFERENCIA AL ARCHIVO GENERADO */
  const swaggerFile = require('./swagger_output.json')
  ...

  const app = express();

  ...
  /* CONFIGURACIÓN DE LA RUTA A LA DOCUMENTACIÓN */
  app.use('/doc', swaggerUi.serve, swaggerUi.setup(swaggerFile))
  ...
  ```

* Ejecute el servidor, con:

  ```
  npm start
  ```

* Revise el URL de la documentación en el navegador:

  ```
  http://localhost:3000/doc
  ```


### Fundamental

### Documentación

* Revise la documentación en [Swagger](https://swagger.io/).

### Términos

swagger

### Referencias

* Swagger. Retrieved 21 August 2023, from https://swagger.io/
* Autogenerated documentation API with OpenAPI and Swagger for NodeJS and Express. (2022). Retrieved 21 August 2023, from https://dev.to/luizcalaca/autogenerated-documentation-api-with-openapi-and-swagger-for-nodejs-and-express-31g9