---
theme: jekyll-theme-leap-day
---

## Guía 16

[DAWM](/DAWM/) / [Proyecto06](/DAWM/proyectos/2023/proyecto06)

### Actividades previas

* Identifique el uso de Swagger en la [documentación oficial](https://swagger.io/).

### Actividades en clases

* Clone localmente tu repositorio **restapi**.
* Abra el proyecto en VSCode y levante el servidor.

#### Dependencias Locales

* Instale los módulos **swagger-autogen**, **swagger-ui-express** y **swagger-jsdoc**

  ```
  npm install swagger-autogen swagger-ui-express swagger-jsdoc
  ```

#### Swagger-config

* En la raíz del proyecto, cree el archivo **swagger.js**. En la variable **endpointsFiles** coloque las rutas a los controladores de los modelos.

  ```text
  const swaggerAutogen = require('swagger-autogen')()

  const doc = {
    info: {
      title: 'REST API',
      description: 'REST API with Express and Firestore'
    },
    host: 'localhost:5000',
    "basePath": "/api",
  };

  const outputFile = './swagger_output.json'
  const endpointsFiles = ['./routes/*.js']

  swaggerAutogen(outputFile, endpointsFiles, doc)
  ```

#### Package.json - Script

* Modifique el archivo **package.json** y agregue la entrada _swagger-autogen_.

  ```text
  ...
  "scripts": {
    ...
    "swagger": "node ./swagger.js"
    ...
  },
  ...
  ```

#### Esquema de salida: swagger_ouput

* Desde la línea de comandos, ejecute el comando:

  ```
  npm run swagge
  ```

* En el archivo **swagger_ouput.json**, modifique las URLs de cada endpoint (clave _paths_) de acuerdo con las rutas en la aplicación:

  ```text
    ...
    "paths": {
      "/items": {
        "post": { ... },
        "get": { ... },
      },
      "/items/{id}": {
        "get": { ... },
        ...
      }
    }
    ...
  ```

#### Registro del manejador de rutas

* Modifique el archivo generado **app.js** con la referencia al módulo _swagger-ui-express_ y al archivo generado _swagger_output.json_. Además, agregue la ruta a la documentación.


  ```typescript
  const admin = require('firebase-admin');
  ...
  /* Referencia al módulo swagger-ui-express */
  const swaggerUi = require('swagger-ui-express')

  /* Referencia al archivo con la descripción */
  const swaggerFile = require('./swagger_output.json')
  ...

  const app = express();

  ...

  /* Ruta Base -> Documentación */
  app.use('/documentation', swaggerUi.serve, swaggerUi.setup(swaggerFile))

  app.use('/api', require('./routes/api'));

  ...
  ```

* Ejecute el servidor, con:

  ```
  npm start
  ```

* Compruebe los endpoints del manejador de ruta, con:

  ```
  http://localhost:3000/documentation
  ```

* Versiona local y remotamente el repositorio **restapi**.

### Documentación

* Revise la documentación en [Swagger](https://swagger.io/) y [Swagger-Autogen](https://swagger-autogen.github.io/docs/).

### Fundamental

* Uso de Swagger en [X](https://twitter.com/rawas_aditya/status/1709735670040694799)

<blockquote class="twitter-tweet" data-media-max-width="560"><p lang="en" dir="ltr">🚀 Made significant progress today on our Project Management System! Integrated centralized Swagger documentation for clear API understanding. Also, added endpoints for projects and tasks. Excited to see it coming together! 💻🔨 <a href="https://twitter.com/hashtag/MERNStack?src=hash&amp;ref_src=twsrc%5Etfw">#MERNStack</a> <a href="https://twitter.com/hashtag/ProjectManagement?src=hash&amp;ref_src=twsrc%5Etfw">#ProjectManagement</a> <a href="https://twitter.com/hashtag/SwaggerUI?src=hash&amp;ref_src=twsrc%5Etfw">#SwaggerUI</a> <a href="https://t.co/ZP3iin9RMa">pic.twitter.com/ZP3iin9RMa</a></p>&mdash; Aditya Rawas (@rawas_aditya) <a href="https://twitter.com/rawas_aditya/status/1709735670040694799?ref_src=twsrc%5Etfw">October 5, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

### Términos

swagger, documentación

### Referencias

* Swagger. Retrieved 21 August 2023, from https://swagger.io/
* Autogenerated documentation API with OpenAPI and Swagger for NodeJS and Express. (2022). Retrieved 21 August 2023, from https://dev.to/luizcalaca/autogenerated-documentation-api-with-openapi-and-swagger-for-nodejs-and-express-31g9
* Swagger-ui-express (no date b) npm. Available at: https://www.npmjs.com/package/swagger-ui-express (Accessed: 28 June 2024). 
* Swagger-Autogen (no date) npm. Available at: https://www.npmjs.com/package/swagger-autogen (Accessed: 28 June 2024). 
* Introduction (no date) Swagger Autogen. Available at: https://swagger-autogen.github.io/docs/ (Accessed: 28 June 2024). 
* Swagger-JSDOC (no date) npm. Available at: https://www.npmjs.com/package/swagger-jsdoc (Accessed: 28 June 2024).